<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Survey Page</title>

  <!-- Latest compiled and minified CSS & JS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

</head>

<body>

  <div class="container">

    <div class="jumbotron">
      <h1 class="text-center">
        <span class="fa fa-user"></span> Friend Finder</h1>
      <hr>
      <h2 class="text-center">Answer the following</h2>
      <br>
      <div class="text-center">
        <a href="/home">
          <button class="btn btn-lg btn-default">
            <span class="fa fa-home"></span>
          </button>
        </a>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12">
        <!-- User Info -->
        <div class= "card">
            <div class = "card-header">About you</div>
            <div class = "card-body">
                <form role = "form">
                    <div class="form-group">
                        <h3>Your name (Required)</h3>
                        <input type = "text" class = "form-control" id = "userName">
                    </div>
                    <div class = "form-group">
                        <h3>Your photo (Required)</h3>
                        <input type = " text" class = "form-control" id = "userPhoto">
                    </div>
                </form>
            </div>

        <!-- Questions -->
        
          <div class="card-header">Survey Questions</div> 
          <div class="card-body">
            <form role="form">
              <div class="form-group">
                <h3>QUESTION 1</h3>
                <h4>You are always looking for an adventure</h4>
                <div class = "col-xs-2">
                    <select data-placeholder=""  class = "chosen-select" id = "q1">
                        <option selected>Select an option</option>
                        <option value="1">1 (Strongly disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value = "5">5 (Strongly agree)</option>
                    </select>
                </div>
              </div>
              <div class="form-group">
                <h3>QUESTION 2</h3>
                <h4>You rely more on your instinct than your imagination</h4>
                <div clasc = "col-xs-2">
                    <select data-placeholder="" class="chosen-select" id="q2">
                        <option selected>Select an option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
              </div>
              <div class="form-group">
                <h3>QUESTION 3</h3>
                <h4>You find it easy to stay relax more under pressure</h4>
                <div clasc = "col-xs-2">
                    <select data-placeholder="" class="chosen-select" id="q3">
                        <option selected>Select an option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
              </div>
              <div class="form-group">
                <h3>QUESTION 4</h3>
                <h4>You rely more on your instinct than your imagination</h4>
                <div clasc = "col-xs-2">
                    <select data-placeholder="" class="chosen-select" id="q4">
                        <option selected>Select an option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
              </div>
              <div class="form-group">
                <h3>QUESTION 5</h3>
                <h4>Your want to live in your dreams more than reality</h4>
                <div clasc = "col-xs-2">
                    <select data-placeholder="" class="chosen-select" id="q5">
                        <option selected>Select an option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
              </div>
              <div class="form-group">
                <h3>QUESTION 6</h3>
                <h4>Telling the truth is better than telling a lie to make someone happy</h4>
                <div clasc = "col-xs-2">
                    <select data-placeholder="" class="chosen-select" id="q6">
                        <option selected>Select an option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
              </div>
              <div class="form-group">
                <h3>QUESTION 7</h3>
                <h4>You do not care to relate to other people's feelings</h4>
                <div clasc = "col-xs-2">
                    <select data-placeholder="" class="chosen-select" id="q7">
                        <option selected>Select an option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
              </div>
              <div class="form-group">
                <h3>QUESTION 8</h3>
                <h4>People do not upset you that easily</h4>
                <div clasc = "col-xs-2">
                    <select data-placeholder="" class="chosen-select" id="q8">
                        <option selected>Select an option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
              </div>
              <div class="form-group">
                <h3>QUESTION 9</h3>
                <h4>You generally accept people for who they are</h4>
                <div clasc = "col-xs-2">
                    <select data-placeholder="" class="chosen-select" id="q9">
                        <option selected>Select an option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
              </div>
              <div class="form-group">
                <h3>QUESTION 10</h3>
                <h4>You are an outdoor person</h4>
                <div clasc = "col-xs-2">
                    <select data-placeholder="" class="chosen-select" id="q10">
                        <option selected>Select an option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
              </div>
              <button type="submit" class="btn btn-primary submit">Submit</button>
            </form>
          </div>
        </div>
      </div>
    </div>


    <footer class="footer">
      <div class="container">
        <p>
          <a href="/api/friends">API FRIEND Link</a> |
          
      </div>
    </footer>

  </div>

  <!-- Modal -->
	<div id="resultsModal" class="modal fade" role="dialog">
	  <div class="modal-dialog">

	    <!-- Modal content-->
	    <div class="modal-content">
	      <div class="modal-header">
	        <h2 class="modal-title"><strong>Best Match</strong></h2>
	      </div>
	      <div class="modal-body">
	        <h2 id="matchName"></h2>
            
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	      </div>
	    </div>

	  </div>
    </div>

</body>

</html>

<!-- JAVASCRIPT -->
<script type="text/javascript">

  $(".submit").on("click", function(event) {
    event.preventDefault();

    function validateForm() {
		var isValid = true;
		$(".form-control").each(function() {
		    if ( $(this).val() === "" )
		        isValid = false;
        });
        
	    $(".chosen-select").each(function() {
		    if( $(this).val() === "")
			    isValid = false
		});
		return isValid;
	}

    if (validateForm){
        var newPerson = {
            name: $("#userName").val().trim(),
            photo: $("#userPhoto").val().trim(),
            scores: [ $("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val()]
        }
        console.log(newPerson);
    }

    $.post("/api/friends", newPerson, function(data) {
        //Shows best match
        $("#matchName").text(data.name);
	    $("#matchPhoto").attr("src", data.photo);
		$("#resultsModal").modal("toggle");

      });

  });

</script>
